## 14-3 입출력 관련 API

자바는 기본적인 입출력을 위한 다양한 API를 제공한다.  
대표적으로 **System 클래스**, **Scanner 클래스**, **File 클래스**가 있다.

---

#### System.in 필드
- 표준 입력 스트림(키보드 입력)을 나타낸다.
- 기본적으로 바이트 기반(InputStream)이다.
- 보통 `InputStreamReader`나 `Scanner`와 함께 사용된다.

---

#### System.out 필드
- 표준 출력 스트림(콘솔 출력)을 나타낸다.
- 기본적으로 `PrintStream` 객체이며, `print()`, `println()`, `printf()` 메소드를 제공한다.
- 화면 출력에 가장 많이 사용된다.

---

#### Scanner 클래스
- 입력을 편리하게 처리할 수 있는 유틸리티 클래스 (`java.util.Scanner`).
- 키보드 입력(`System.in`)뿐만 아니라 파일, 문자열 등 다양한 입력 소스를 처리 가능하다.
- 토큰 단위(공백, 엔터 등 구분자 기준)로 데이터를 읽을 수 있다.

**주요 메소드**
- `nextLine()` : 한 줄 입력
- `next()` : 토큰 단위 입력
- `nextInt()`, `nextDouble()`, `nextBoolean()` : 해당 타입 값 읽기

---

#### File 클래스
- 파일과 디렉토리의 경로명을 표현하는 클래스 (`java.io.File`).
- 실제 파일을 읽거나 쓰는 기능은 없고, 경로와 속성 정보를 제공한다.

**주요 기능**
- 파일 존재 여부 확인: `exists()`
- 파일/디렉토리 구분: `isFile()`, `isDirectory()`
- 파일 정보 읽기: `getName()`, `getPath()`, `length()`
- 파일 생성/삭제: `createNewFile()`, `delete()`
- 디렉토리 목록: `listFiles()`

---

### 정리
1. **System.in** : 표준 입력(키보드), 바이트 기반.  
2. **System.out** : 표준 출력(콘솔), `PrintStream` 사용.  
3. **Scanner** : 다양한 입력을 편리하게 처리, 타입별 메소드 제공.  
4. **File** : 파일/디렉토리의 경로 및 속성 관리.  

# 마무리

## ▶ 4가지 키워드로 끝내는 핵심 포인트

• **System.in**: 자바는 콘솔에서 키보드의 데이터를 입력받을 수 있도록 System 클래스의 in 정적 필드를 제공합니다. System.in은 InputStream 타입의 필드입니다. 주로 InputStreamReader 보조 스트림과 BufferedReader 보조 스트림을 연결해서 사용하거나, Scanner를 이용해서 입력된 문자열을 읽습니다.

• **System.out**: 콘솔에서 키보드로 입력된 데이터를 System.in으로 읽었다면, 반대로 콘솔에서 모니터로 데이터를 출력하기 위해서는 System 클래스의 out 정적 필드를 사용합니다. System.out은 PrintStream 타입의 필드입니다. 따라서 PrintStream이 제공하는 print(), println(), printf()와 같은 메소드를 이용해서 모니터로 출력할 수 있습니다.

• **Scanner**: Scanner 클래스는 입출력 스트림도 아니고, 보조 스트림도 아닙니다. Scanner는 문자 파일이나, 바이트 기반 입출력 스트림에서 라인 단위 문자열을 쉽게 읽도록 하기 위해 java.util 패키지에서 제공하는 클래스입니다.

• **File**: java.io 패키지에서 제공하는 File 클래스는 파일 및 폴더(디렉토리) 정보를 제공해주는 역할을 합니다.

---

## ▶ 확인 문제

### 1. 이 문제는 정답 없이 독자 여러분이 직접 개발해보는 자유 프로젝트입니다. 이 책을 학습하고 나서 원하실 만들고 싶다는 생각이 든다면, 아래의 메뉴를 가지고 있는 콘솔 계시판을 만들고 나서 원하실 때 여러분만의 예외 처리를 만족 들어보세요. 이런 경우라도 예외가 발생되어 프로그램이 종료되지 않도록 예외 처리를 만족을 기하기 바랍니다. 추가적인 기능이 필요하다면 여러분의 아이디어와 결합해보세요.

```
--------------------------------------------------------------
1. 목록보기 | 2.상세보기 | 3.수정하기 | 4.삭제하기 | 5.파일처장 | 6.종료
--------------------------------------------------------------
선택:
```

① **추천 소스 파일**:
Board.java, BoardService.java, BoardServiceExample.java

② **추천 API**:
List, ArrayList, Scanner, FileOutputStream, FileInputStream, ObjectOutputStream, ObjectInputStream

**풀이**:
이 문제는 종합적인 콘솔 기반 게시판 시스템을 만드는 프로젝트입니다. 다음과 같이 구현할 수 있습니다:

```java
// Board.java
import java.io.Serializable;
import java.util.Date;

public class Board implements Serializable {
    private static final long serialVersionUID = 1L;
    
    private int no;
    private String title;
    private String content;
    private String writer;
    private Date regDate;
    
    public Board(int no, String title, String content, String writer) {
        this.no = no;
        this.title = title;
        this.content = content;
        this.writer = writer;
        this.regDate = new Date();
    }
    
    // getter, setter 메소드들
    public int getNo() { return no; }
    public void setNo(int no) { this.no = no; }
    
    public String getTitle() { return title; }
    public void setTitle(String title) { this.title = title; }
    
    public String getContent() { return content; }
    public void setContent(String content) { this.content = content; }
    
    public String getWriter() { return writer; }
    public void setWriter(String writer) { this.writer = writer; }
    
    public Date getRegDate() { return regDate; }
    public void setRegDate(Date regDate) { this.regDate = regDate; }
    
    @Override
    public String toString() {
        return String.format("%-3d %-15s %-10s %tF", no, title, writer, regDate);
    }
}
```

```java
// BoardService.java
import java.io.*;
import java.util.*;

public class BoardService {
    private List<Board> boardList;
    private int nextNo;
    private final String DATA_FILE = "boards.dat";
    
    public BoardService() {
        this.boardList = new ArrayList<>();
        this.nextNo = 1;
        loadBoards();
    }
    
    // 게시글 목록 보기
    public void showBoardList() {
        if (boardList.isEmpty()) {
            System.out.println("등록된 게시글이 없습니다.");
            return;
        }
        
        System.out.println("--------------------------------------------------------------");
        System.out.println("번호  제목               작성자     등록일");
        System.out.println("--------------------------------------------------------------");
        
        for (Board board : boardList) {
            System.out.println(board);
        }
        System.out.println("--------------------------------------------------------------");
    }
    
    // 게시글 상세 보기
    public void showBoardDetail(int no) {
        Board board = findBoardByNo(no);
        if (board == null) {
            System.out.println("해당 번호의 게시글을 찾을 수 없습니다.");
            return;
        }
        
        System.out.println("--------------------------------------------------------------");
        System.out.println("번호: " + board.getNo());
        System.out.println("제목: " + board.getTitle());
        System.out.println("작성자: " + board.getWriter());
        System.out.println("등록일: " + board.getRegDate());
        System.out.println("--------------------------------------------------------------");
        System.out.println("내용:");
        System.out.println(board.getContent());
        System.out.println("--------------------------------------------------------------");
    }
    
    // 게시글 등록
    public void registerBoard(String title, String content, String writer) {
        Board board = new Board(nextNo++, title, content, writer);
        boardList.add(board);
        System.out.println("게시글이 등록되었습니다.");
    }
    
    // 게시글 수정
    public void updateBoard(int no, String newTitle, String newContent) {
        Board board = findBoardByNo(no);
        if (board == null) {
            System.out.println("해당 번호의 게시글을 찾을 수 없습니다.");
            return;
        }
        
        board.setTitle(newTitle);
        board.setContent(newContent);
        System.out.println("게시글이 수정되었습니다.");
    }
    
    // 게시글 삭제
    public void deleteBoard(int no) {
        Board board = findBoardByNo(no);
        if (board == null) {
            System.out.println("해당 번호의 게시글을 찾을 수 없습니다.");
            return;
        }
        
        boardList.remove(board);
        System.out.println("게시글이 삭제되었습니다.");
    }
    
    // 파일 저장
    public void saveBoards() {
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(DATA_FILE))) {
            oos.writeObject(boardList);
            oos.writeInt(nextNo);
            System.out.println("게시글 데이터가 파일에 저장되었습니다.");
        } catch (IOException e) {
            System.out.println("파일 저장 중 오류가 발생했습니다: " + e.getMessage());
        }
    }
    
    // 파일 로드
    @SuppressWarnings("unchecked")
    private void loadBoards() {
        File file = new File(DATA_FILE);
        if (!file.exists()) {
            return;
        }
        
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(DATA_FILE))) {
            boardList = (List<Board>) ois.readObject();
            nextNo = ois.readInt();
            System.out.println("게시글 데이터를 파일에서 로드했습니다.");
        } catch (IOException | ClassNotFoundException e) {
            System.out.println("파일 로드 중 오류가 발생했습니다: " + e.getMessage());
            boardList = new ArrayList<>();
            nextNo = 1;
        }
    }
    
    // 번호로 게시글 찾기
    private Board findBoardByNo(int no) {
        return boardList.stream()
                .filter(board -> board.getNo() == no)
                .findFirst()
                .orElse(null);
    }
}
```

```java
// BoardServiceExample.java
import java.util.Scanner;

public class BoardServiceExample {
    private static BoardService boardService = new BoardService();
    private static Scanner scanner = new Scanner(System.in);
    
    public static void main(String[] args) {
        boolean run = true;
        
        System.out.println("*** 콘솔 게시판 시스템 ***");
        
        while (run) {
            try {
                showMenu();
                int choice = getChoice();
                
                switch (choice) {
                    case 1: // 목록보기
                        boardService.showBoardList();
                        break;
                    case 2: // 상세보기
                        showBoardDetail();
                        break;
                    case 3: // 게시글 등록
                        registerBoard();
                        break;
                    case 4: // 수정하기
                        updateBoard();
                        break;
                    case 5: // 삭제하기
                        deleteBoard();
                        break;
                    case 6: // 파일저장
                        boardService.saveBoards();
                        break;
                    case 7: // 종료
                        System.out.println("프로그램을 종료합니다.");
                        run = false;
                        break;
                    default:
                        System.out.println("잘못된 선택입니다. 1-7 사이의 번호를 입력하세요.");
                }
                
                if (run) {
                    System.out.println("\n계속하려면 Enter를 누르세요...");
                    scanner.nextLine();
                }
                
            } catch (Exception e) {
                System.out.println("오류가 발생했습니다: " + e.getMessage());
                scanner.nextLine(); // 잘못된 입력 제거
            }
        }
        
        scanner.close();
    }
    
    private static void showMenu() {
        System.out.println("\n--------------------------------------------------------------");
        System.out.println("1.목록보기 | 2.상세보기 | 3.등록하기 | 4.수정하기 | 5.삭제하기 | 6.파일저장 | 7.종료");
        System.out.println("--------------------------------------------------------------");
        System.out.print("선택: ");
    }
    
    private static int getChoice() {
        try {
            return Integer.parseInt(scanner.nextLine());
        } catch (NumberFormatException e) {
            throw new IllegalArgumentException("숫자를 입력해주세요.");
        }
    }
    
    private static void showBoardDetail() {
        System.out.print("조회할 게시글 번호: ");
        int no = Integer.parseInt(scanner.nextLine());
        boardService.showBoardDetail(no);
    }
    
    private static void registerBoard() {
        System.out.print("제목: ");
        String title = scanner.nextLine();
        
        System.out.print("작성자: ");
        String writer = scanner.nextLine();
        
        System.out.print("내용: ");
        String content = scanner.nextLine();
        
        if (title.trim().isEmpty() || writer.trim().isEmpty()) {
            System.out.println("제목과 작성자는 필수 입력사항입니다.");
            return;
        }
        
        boardService.registerBoard(title, content, writer);
    }
    
    private static void updateBoard() {
        System.out.print("수정할 게시글 번호: ");
        int no = Integer.parseInt(scanner.nextLine());
        
        System.out.print("새 제목: ");
        String newTitle = scanner.nextLine();
        
        System.out.print("새 내용: ");
        String newContent = scanner.nextLine();
        
        if (newTitle.trim().isEmpty()) {
            System.out.println("제목은 필수 입력사항입니다.");
            return;
        }
        
        boardService.updateBoard(no, newTitle, newContent);
    }
    
    private static void deleteBoard() {
        System.out.print("삭제할 게시글 번호: ");
        int no = Integer.parseInt(scanner.nextLine());
        
        System.out.print("정말 삭제하시겠습니까? (y/N): ");
        String confirm = scanner.nextLine();
        
        if ("y".equalsIgnoreCase(confirm) || "yes".equalsIgnoreCase(confirm)) {
            boardService.deleteBoard(no);
        } else {
            System.out.println("삭제가 취소되었습니다.");
        }
    }
}
```

**주요 특징**:
1. **예외 처리**: 모든 입력과 파일 I/O에 대한 예외 처리 구현
2. **객체 직렬화**: ObjectOutputStream/ObjectInputStream을 사용한 데이터 영속성
3. **사용자 친화적 인터페이스**: 명확한 메뉴와 안내 메시지
4. **입력 검증**: 필수 입력 사항 체크 및 잘못된 입력 처리
5. **확장성**: 추가 기능을 쉽게 추가할 수 있는 구조

**실행 예시**:
```
*** 콘솔 게시판 시스템 ***

--------------------------------------------------------------
1.목록보기 | 2.상세보기 | 3.등록하기 | 4.수정하기 | 5.삭제하기 | 6.파일저장 | 7.종료
--------------------------------------------------------------
선택: 3
제목: Java 학습 후기
작성자: 홍길동
내용: Java 기초부터 차근차근 학습하고 있습니다.
게시글이 등록되었습니다.
```

이 프로젝트는 Java의 기본 개념들(클래스, 컬렉션, I/O, 예외 처리)을 종합적으로 활용한 실무형 예제입니다.