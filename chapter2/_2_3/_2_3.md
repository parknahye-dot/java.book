## 2-3 타입 변환

#### 자바 타입 변환 정리

자바의 타입 변환(Type Casting)은 **자동(묵시적)** 과 **강제(명시적)** 두 가지가 있다.

#### 자동 타입 변환 (묵시적 변환)

- 작은 크기 → 큰 크기 타입으로 자동 변환
- 데이터 손실 없음

##### 변환 규칙
- 기본 타입:
`byte → short → char → int → long → float → double`
- 정수 → 정수:
`byte → short → int → long`
- 정수 → 실수(무조건 정수 타입 변환):
`int → float`, `long → double`
- 문자 → 정수:
`char → int`
- 모든 정수 → 실수:
`float → double`
```java
int i = 10;
double d = i; // int → double
```
---

#### 강제 타입 변환 (명시적 변환)

- 큰 크기 → 작은 크기 타입으로 변환
- 데이터 손실 가능
- 캐스팅 연산자: `(타입)`

##### 변환 규칙
- 큰 정수 → 작은 정수: `int → short`, `int → byte`
- 실수 → 정수: `double → int`, `float → int`
- 정수 ↔ 문자: `int ↔ char`

```java
double d = 3.14;
int i = (int) d;
// double → int (소수점 손실)
```

---

#### 요약

- **자동 변환**: 안전한 변환 (작은 → 큰)  
- **강제 변환**: 위험할 수 있는 변환 (큰 → 작은, 실수 → 정수 등)

---

#### 정수 연산에서의 자동 타입 변환
정수 타입 `(byte, short, char, int, long)` 이 연산될 때는 작은 타입이 큰 타입으로 자동 변환돼서 계산
`byte < short < int < long < float < double`

`byte, short, char` → `int`
`int + long` → `long`
`long + float` → `float`
`float + double` → `double`

```java
public class AutoPromotionTest {
    public static void main(String[] args) {
        byte b = 10;
        char c = 'A';
        int i = 100;
        long l = 1000L;
        float f = 3.14f;
        double d = 5.5;

        System.out.println(b + c);   
        // int + char → int
        System.out.println(i + l);   
        // int + long → long
        System.out.println(l + f);   
        // long + float → float
        System.out.println(f + d);   
        // float + double → double
    }
}
```

- 컴파일 단계에서의 정수 연산
```java
byte b1 = 10 + 20;
 System.out.println("b1 = " + b1)
→ b1 = 30
```
```java
char c1 = 'A' + 1; 
System.out.println("c1 = " + c1);
→ c1 = B
```
```java
int i1 = 100 * 200;  
System.out.println("i1 = " + i1);
→ i1 = 20000
```
```java
byte x = 10;
byte y = 20;
int i2 = x + y; 
System.out.println("i2 = " + i2);
→ i2 = 30
```
```java
int i3 = 200 + 100;  
System.out.println("i3 = " + i3);
→ i3 = 300
```

#### 실수 연산에서의 자동 타입 변환

- 변환 규칙

1. `int, long` + `float` → `float`
정수가 float으로 변환된 후 계산됨.
```java
int i = 10;
float f = 3.5f;
float result = i + f;  // int → float
System.out.println(result); // 13.5
```
2. `int, long, float` + `double` → `double`
정수나 float은 모두 double로 변환됨.
```java
long l = 100L;
double d = 5.25;
double result = l + d; // long → double
System.out.println(result); // 105.25
```

3. `float + double` → `double`
float이 double로 변환된 후 계산됨.
```java
float f = 2.5f;
double d = 1.2;
double result = f + d; // float → double
System.out.println(result); // 3.7
```
---
- 타입 변환 우선순위 (정수 + 실수 포함)
`byte → short → int → long → float → double`
어떤 타입이랑 더해도 double이 나오면 결과는 무조건 double.
---
- x=1, y=2 나눗셈 에서 0.5 나오는 법

핵심: int / int는 무조건 정수 나눗셈이라 결과가 0
→ 그래서 피연산자 중 하나를 double로 캐스팅해야 함

1. `(double)x / y`

2. `x / (double)y`

3. `(double)x / (double)y`

결과: 항상 0.5 (double 연산)

정수끼리 나눴을 때 손실 없이 실수 결과를 얻으려면 캐스팅을 어디에 두든 상관없다.

---

[연산식에서 자동 타입 변환](_0203_4.java)

#### 연산에서의 문자열 자동 타입 변환

| 경우                | 설명               | 결과 예시        |
|---------------------|--------------------|-----------------|
| 숫자 + 숫자         | 덧셈 연산          | 숫자             |
| "문자열" + 숫자     | 문자열 + 숫자 결합 | "문자열숫자"     |
| 숫자 + "문자열"     | 숫자 + 문자열 결합 | "숫자문자열"     |

| 코드                          | 내부 처리              | 결과값   |
|-------------------------------|------------------------|----------|
| int value = 3 + 7;            | 10                     | 10       |
| String str = "3" + 7;         | "3" + "7"              | "37"     |
| String str = 3 + "7";         | "3" + "7"              | "37"     |

| 코드                          | 내부 처리          | 최종 결과    |
|-------------------------------|--------------------|--------------|
| int value = 1 + 2 + 3;        | int value = 3 + 3; | int value=6  |
| String str = 1 + 2 + "3";     | String str = 3+"3";| "33"         |
| String str = 1 + "2" + 3;     | String str = "12"+3;| "123"       |
| String str = "1" + 2 + 3;     | String str = "12"+3;| "123"       |

- 특정 부분 우선 연산

해당 부분을 괄호()로 감쌈
`String str = "1" + (2+3);` → `String str = "1" + 5;` → `String str = "15";`

#### 문자열을 기본 타입으로 강제 타입 변환

- 문자열 → 기본 타입 변환

| 대상 타입   | 변환 메서드                        | 예시 코드                          | 결과 값   |
|-------------|-----------------------------------|-------------------------------------|-----------|
| byte        | Byte.parseByte(String s)          | byte b = Byte.parseByte("10");      | 10        |
| short       | Short.parseShort(String s)        | short s = Short.parseShort("20");   | 20        |
| int         | Integer.parseInt(String s)        | int i = Integer.parseInt("123");    | 123       |
| long        | Long.parseLong(String s)          | long l = Long.parseLong("1000");    | 1000L     |
| float       | Float.parseFloat(String s)        | float f = Float.parseFloat("3.14"); | 3.14f     |
| double      | Double.parseDouble(String s)      | double d = Double.parseDouble("2.71"); | 2.71  |
| boolean     | Boolean.parseBoolean(String s)    | boolean b = Boolean.parseBoolean("true"); | true |
| char        | s.charAt(0) (문자열의 첫 글자)    | char c = "A".charAt(0);             | 'A'       |

char은 따로 parse 메서드가 없고 charAt()으로 가져옴

- 기본 타입 → 문자열 변환
`String str = String.value0f(기본타입값);

#### 핵심 정리
- 자동 타입 변환: 자동으로 타입이 변환되는 것을 말합니다. 값의 허용 범위가 작은 타입이 허용 범위가 큰 타입으로 저장될 때 발생합니다.
- 강제 타입 변환: 강제로 타입을 변환하는 것을 말합니다. 값의 허용 범위가 큰 타입을 허용 범위가 작은 타입으로 쪼개어서 저장하는 것을 말합니다.
-문자열 결합 연산: 문자열과 + 연산을 하면 다른 피연산자도 문자열로 변환되어 문자열 결합이 일어납니다.
- integer.parselnt(): 문자열을 정수 int 타입으로 변환합니다.
- Double.parseDouble(): 문자열을 실수 Double 타입으로 변환합니다.

#### 문제 풀이

1. 자동 타입 변환에 대한 내용입니다. 컴파일 에러가 발생하는 것은 무엇입니까?

```java
byte byteValue = 10;
char charValue = 'A';
  ```

① int intValue = byteValue;
② int intValue = charValue;
③ short shortValue = charValue;
④ double doubleValue = byteValue;
> 3. short는 char보다 허용 범위가 작음

2. 강제 타입 변환에 대한 내용입니다. 컴파일 에러가 발생하는 것은 무엇입니까?

```java
int intValue = 10;
char charValue = 'A';
double doubleValue = 5.7;
String strValue = "A";
  ```

① double var = (double) intValue;
② byte var = (byte) intValue;
③ int var = (int) doubleValue;
④ char var = (char) strValue;
> 1. 문자열은 char로 바꿀 수 없다

3. 연산식에서의 타입 변환에 대한 내용입니다. 컴파일 에러가 발생하는 것은 무엇입니까?

```java
byte byteValue = 10;
float floatValue = 2.5F;
double doubleValue = 2.5;
  ```

① byte result = byteValue + byteValue;
② int result = 5 + byteValue;
③ float result = 5 + floatValue;
④ double result = 5 + doubleValue;
> 1. byte 타입 피연산자는 int로 변환

4. 다음 코드에서 컴파일 에러가 발생하는 위치와 이유를 설명해보세요.

```java
short s1 = 1;
short s2 = 2;
int i1 = 3;
int i2 = 4;
short result = s1 + s2;
int result = i1 + i2;
  ```
> 5. short 타입 피연산자는 int로 변환

5. 알파벳 a의 유니코드는 97이고, b의 유니코드는 98입니다. 따라서 a의 유니코드에 1을 더하면 b의 유니코드가 되므로 다음과 같이 코드를 작성했습니다. 실행결과는 b가 출력되어야 하는데, 컴파일 에러가 발생했습니다. 무엇이 문제이고, 어떻게 수정하면 될까요?

```java
char c1 = 'a';
char c2 = c1 + 1;
System.out.println(c2);
  ```
> char c2=(char)(c1+1)
b라는 문자가 출력되려면 앞에 (char)라는 캐스팅 연산자를 붙여야함
문자 출력 → char b = (char)(a+1);
숫자 출력 → int b = a+1;

6. 자바에서 ‘/’는 나눗셈 연산자입니다. x / y는 x를 y로 나누는 연산을 수행합니다. ⬜⬜에 들어갈 타입은 무엇이며, 출력되는 결과와 그 이유를 설명해보세요.

```java
int x = 5;
int y = 2;
⬜⬜ result = x / y;
System.out.println(result);
  ```
> int,2 정수/정수 시 정수로 계산되고 뒤의 소수점은 버려짐
ㅁ
7. 6번 문제에서 출력되는 결과로 2.5가 나오게 하고 싶습니다. ⬜① ~ ⬜②에 들어갈 코드를 작성해보세요.

```java
int x = 5;
int y = 2;
⬜① result = ⬜②;
System.out.println(result);
  ```
> double/((double)x/y);, (x/(double)y);, ((double)x/(double)y);
x,y 둘 중 하나 또는 둘 다 double이 들어가야함

8. 두 실수를 덧셈하고 소수점 이하 자리를 버리고 싶습니다. ⬜⬜에 들어갈 코드를 작성해보세요.

```java
double var1 = 3.5;
double var2 = 2.7;
int result = ⬜⬜;
  ```
>(int)(var1+var2)
두 실수를 덧셈 한 후 소수자를 버리는게 문제임으로 int와 변수를 따로 입력

9. var1부터 var4까지 + 연산을 수행해서 int 타입 result 변수에 9가 저장되도록 ⬜⬜에 들어갈 코드를 작성해보세요.

```java
long var1 = 2L;
float var2 = 1.8f;
double var3 = 2.5;
String var4 = "3.9";
int result = ⬜⬜;
System.out.println(result);
  ```
> (int)(var1+var2+var3)+(int)Double.parseDouble(var4);
(var1+var2+var3)을 다 더하면 6.3, 6.3의 소수점을 버리기 위해 (int)를 붙이고 var4는 문자이므로 Double.parseDouble(var4)을 사용해 숫자로 바꿔준 후 (int)를 붙여 소수점을 버린 후 더함

10. 다음 코드를 실행했을 때 출력 결과를 적어보세요.

```java
String str1 = 2 + 3 + "";
String str2 = 2 + "" + 3;
String str3 = "" + 2 + 3;
System.out.println(str1);
System.out.println(str2);
System.out.println(str3);
  ```
> 5,23,23 ""는 문자열 먼저 수행된 연산이 덧셈 연산이라면 덧셈 결과를 가지고 그 다음 연산을 수행해야함

11. 문자열을 기본 타입으로 변환하려고 합니다. ⬜① ~ ⬜④에 알맞은 코드를 작성해보세요.

```java
byte value = ⬜① ("10");
int value = ⬜② ("1000");
float value = ⬜③ ("20.5");
double value = ⬜④ ("3.14159");
  ```
  > Byte.parseByte,Integer.parseInt,Float.parseFloat,Double.parseDouble