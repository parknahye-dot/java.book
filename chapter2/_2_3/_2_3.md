## 2-3 타입 변환

#### 자바 타입 변환 정리

자바의 타입 변환(Type Casting)은 **자동(묵시적)** 과 **강제(명시적)** 두 가지가 있다.

#### 자동 타입 변환 (묵시적 변환)

- 작은 크기 → 큰 크기 타입으로 자동 변환
- 데이터 손실 없음

##### 변환 규칙
- 기본 타입:
`byte → short → char → int → long → float → double`
- 정수 → 정수:
`byte → short → int → long`
- 정수 → 실수(무조건 정수 타입 변환):
`int → float`, `long → double`
- 문자 → 정수:
`char → int`
- 모든 정수 → 실수:
`float → double`
```java
int i = 10;
double d = i; // int → double
```
---

#### 강제 타입 변환 (명시적 변환)

- 큰 크기 → 작은 크기 타입으로 변환
- 데이터 손실 가능
- 캐스팅 연산자: `(타입)`

##### 변환 규칙
- 큰 정수 → 작은 정수: `int → short`, `int → byte`
- 실수 → 정수: `double → int`, `float → int`
- 정수 ↔ 문자: `int ↔ char`

```java
double d = 3.14;
int i = (int) d;
// double → int (소수점 손실)
```

---

#### 요약

- **자동 변환**: 안전한 변환 (작은 → 큰)  
- **강제 변환**: 위험할 수 있는 변환 (큰 → 작은, 실수 → 정수 등)

---

#### 정수 연산에서의 자동 타입 변환
정수 타입 `(byte, short, char, int, long)` 이 연산될 때는 작은 타입이 큰 타입으로 자동 변환돼서 계산
`byte < short < int < long < float < double`

`byte, short, char` → `int`
`int + long` → `long`
`long + float` → `float`
`float + double` → `double`

```java
public class AutoPromotionTest {
    public static void main(String[] args) {
        byte b = 10;
        char c = 'A';
        int i = 100;
        long l = 1000L;
        float f = 3.14f;
        double d = 5.5;

        System.out.println(b + c);   
        // int + char → int
        System.out.println(i + l);   
        // int + long → long
        System.out.println(l + f);   
        // long + float → float
        System.out.println(f + d);   
        // float + double → double
    }
}
```

- 컴파일 단계에서의 정수 연산
```java
byte b1 = 10 + 20;
 System.out.println("b1 = " + b1)
→ b1 = 30
```
```java
char c1 = 'A' + 1; 
System.out.println("c1 = " + c1);
→ c1 = B
```
```java
int i1 = 100 * 200;  
System.out.println("i1 = " + i1);
→ i1 = 20000
```
```java
byte x = 10;
byte y = 20;
int i2 = x + y; 
System.out.println("i2 = " + i2);
→ i2 = 30
```
```java
int i3 = 200 + 100;  
System.out.println("i3 = " + i3);
→ i3 = 300
```

#### 실수 연산에서의 자동 타입 변환

- 변환 규칙

1. `int, long` + `float` → `float`
정수가 float으로 변환된 후 계산됨.
```java
int i = 10;
float f = 3.5f;
float result = i + f;  // int → float
System.out.println(result); // 13.5
```
2. `int, long, float` + `double` → `double`
정수나 float은 모두 double로 변환됨.
```java
long l = 100L;
double d = 5.25;
double result = l + d; // long → double
System.out.println(result); // 105.25
```

3. `float + double` → `double`
float이 double로 변환된 후 계산됨.
```java
float f = 2.5f;
double d = 1.2;
double result = f + d; // float → double
System.out.println(result); // 3.7
```
---
- 타입 변환 우선순위 (정수 + 실수 포함)
`byte → short → int → long → float → double`
어떤 타입이랑 더해도 double이 나오면 결과는 무조건 double.
---
- x=1, y=2 나눗셈 에서 0.5 나오는 법

핵심: int / int는 무조건 정수 나눗셈이라 결과가 0
→ 그래서 피연산자 중 하나를 double로 캐스팅해야 함

1. `(double)x / y`

2. `x / (double)y`

3. `(double)x / (double)y`

결과: 항상 0.5 (double 연산)

정수끼리 나눴을 때 손실 없이 실수 결과를 얻으려면 캐스팅을 어디에 두든 상관없다.

---

[연산식에서 자동 타입 변환](_0203_4.java)

#### 연산에서의 문자열 자동 타입 변환

| 경우                | 설명               | 결과 예시        |
|---------------------|--------------------|-----------------|
| 숫자 + 숫자         | 덧셈 연산          | 숫자             |
| "문자열" + 숫자     | 문자열 + 숫자 결합 | "문자열숫자"     |
| 숫자 + "문자열"     | 숫자 + 문자열 결합 | "숫자문자열"     |

| 코드                          | 내부 처리              | 결과값   |
|-------------------------------|------------------------|----------|
| int value = 3 + 7;            | 10                     | 10       |
| String str = "3" + 7;         | "3" + "7"              | "37"     |
| String str = 3 + "7";         | "3" + "7"              | "37"     |

| 코드                          | 내부 처리          | 최종 결과    |
|-------------------------------|--------------------|--------------|
| int value = 1 + 2 + 3;        | int value = 3 + 3; | int value=6  |
| String str = 1 + 2 + "3";     | String str = 3+"3";| "33"         |
| String str = 1 + "2" + 3;     | String str = "12"+3;| "123"       |
| String str = "1" + 2 + 3;     | String str = "12"+3;| "123"       |

- 특정 부분 우선 연산

해당 부분을 괄호()로 감쌈
`String str = "1" + (2+3);` → `String str = "1" + 5;` → `String str = "15";`

#### 문자열을 기본 타입으로 강제 타입 변환

- 문자열 → 기본 타입 변환

| 대상 타입   | 변환 메서드                        | 예시 코드                          | 결과 값   |
|-------------|-----------------------------------|-------------------------------------|-----------|
| byte        | Byte.parseByte(String s)          | byte b = Byte.parseByte("10");      | 10        |
| short       | Short.parseShort(String s)        | short s = Short.parseShort("20");   | 20        |
| int         | Integer.parseInt(String s)        | int i = Integer.parseInt("123");    | 123       |
| long        | Long.parseLong(String s)          | long l = Long.parseLong("1000");    | 1000L     |
| float       | Float.parseFloat(String s)        | float f = Float.parseFloat("3.14"); | 3.14f     |
| double      | Double.parseDouble(String s)      | double d = Double.parseDouble("2.71"); | 2.71  |
| boolean     | Boolean.parseBoolean(String s)    | boolean b = Boolean.parseBoolean("true"); | true |
| char        | s.charAt(0) (문자열의 첫 글자)    | char c = "A".charAt(0);             | 'A'       |

char은 따로 parse 메서드가 없고 charAt()으로 가져옴

- 기본 타입 → 문자열 변환
`String str = String.value0f(기본타입값);

#### 핵심 정리
- 자동 타입 변환: 자동으로 타입이 변환되는 것을 말합니다. 값의 허용 범위가 작은 타입이 허용 범위가 큰 타입으로 저장될 때 발생합니다.
- 강제 타입 변환: 강제로 타입을 변환하는 것을 말합니다. 값의 허용 범위가 큰 타입을 허용 범위가 작은 타입으로 쪼개어서 저장하는 것을 말합니다.
-문자열 결합 연산: 문자열과 + 연산을 하면 다른 피연산자도 문자열로 변환되어 문자열 결합이 일어납니다.
- integer.parselnt(): 문자열을 정수 int 타입으로 변환합니다.
- Double.parseDouble(): 문자열을 실수 Double 타입으로 변환합니다.

#### 문제 풀이